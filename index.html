<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NSW Property Price Guesser</title>
    <meta property="og:title" content="NSW Property Price Guesser">
    <meta property="og:description" content="Test your property valuation skills with real NSW property data">
    <meta property="og:image" content="https://cdn.simulationtheory.ai/gasset/?asset=img&prompt=modern australian house&w=1200&h=630&style=realistic">
    <meta property="og:type" content="website">
    <link rel="icon" href="https://cdn.simulationtheory.ai/gasset/?asset=img&prompt=house icon&w=64&h=64&transparent=true">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 800px;
            width: 100%;
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            padding: 20px;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
        }
        
        .stat {
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.8em;
            font-weight: bold;
            color: #667eea;
        }
        
        .stat-label {
            font-size: 0.9em;
            color: #6c757d;
            margin-top: 5px;
        }
        
        .property-media-container {
            position: relative;
            height: 500px;
            background: #f0f0f0;
            overflow: hidden;
        }
        

        .media-grid {
            display: grid;
            grid-template-columns: 1fr;
            height: 100%;
            gap: 2px;
        }
        
        .main-image {
            position: relative;
            background: #e0e0e0;
            overflow: hidden;
        }
        
        .main-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .side-media {
            display: flex;
            flex-direction: column;
        }
        
        
        .map-container {
            position: relative;
            background: #e8f4f8;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
        }
        
        .map-container iframe {
            width: 100%;
            height: 100%;
            border: 0;
        }
        
        .media-loader {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: #6c757d;
            z-index: 10;
        }
        
        .media-badge {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: rgba(255,255,255,0.95);
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.85em;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            z-index: 5;
        }
        
        
        .content {
            padding: 30px;
        }
        
        .property-details {
            margin-bottom: 25px;
        }
        
        .detail-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #e9ecef;
        }
        
        .detail-label {
            color: #6c757d;
            font-weight: 500;
        }
        
        .detail-value {
            font-weight: 600;
            color: #212529;
        }
        
        .guess-section {
            margin: 25px 0;
        }
        
        .guess-section label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #212529;
        }
        
        .input-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .price-input {
            flex: 1;
            min-width: 150px;
            padding: 15px;
            font-size: 1.2em;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            transition: border-color 0.3s;
        }
        
        .price-input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .btn {
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: 600;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            width: 100%;
        }
        
        @media (min-width: 500px) {
            .btn-primary {
                width: auto;
            }
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #5a6268;
        }
        
        .result {
            display: none;
            margin: 25px 0;
            padding: 20px;
            border-radius: 10px;
            animation: slideIn 0.5s;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .result.show {
            display: block;
        }
        
        .result-success {
            background: #d4edda;
            border: 2px solid #c3e6cb;
        }
        
        .result-close {
            background: #fff3cd;
            border: 2px solid #ffeaa7;
        }
        
        .result-far {
            background: #f8d7da;
            border: 2px solid #f5c6cb;
        }
        
        .result-title {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .result-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 15px;
        }
        
        .result-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
        }
        
        .result-item-label {
            color: #6c757d;
            font-size: 0.9em;
            margin-bottom: 5px;
        }
        
        .result-item-value {
            font-size: 1.3em;
            font-weight: bold;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #6c757d;
        }
        
        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 20px;
            border-radius: 10px;
            margin: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè† NSW Property Price Guesser</h1>
            <p>Can you guess the sale price?</p>
			<p>All sales from the last week in NSW</p>
        </div>
        
        <div class="stats">
            <div class="stat">
                <div class="stat-value" id="roundCount">0</div>
                <div class="stat-label">Rounds</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="avgError">-</div>
                <div class="stat-label">Avg Error</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="bias">-</div>
                <div class="stat-label">Bias</div>
            </div>
        </div>
        
        <div id="app">
            <div class="loading">Loading property data...</div>
        </div>
    </div>


    <script>
        let sessionStats = {
            rounds: 0,
            errors: [],
            guesses: []
        };
        
        let currentProperty = null;
        let allProperties = [];
        

        const postcodeDistances = {
            "2000": 0, "2001": 0, "2002": 0, "2003": 0, "2004": 0,
            "2006": 1, "2007": 2, "2008": 3, "2009": 4, "2010": 2,
            "2011": 3, "2012": 5, "2013": 6, "2014": 7, "2015": 4,
            "2016": 5, "2017": 6, "2018": 7, "2019": 8, "2020": 6,
            "2021": 4, "2022": 5, "2023": 6, "2024": 7, "2025": 8,
            "2026": 9, "2027": 6, "2028": 7, "2029": 8, "2030": 9,
            "2031": 7, "2032": 8, "2033": 9, "2034": 10, "2035": 8,
            "2036": 10, "2037": 4, "2038": 5, "2039": 4, "2040": 5,
            "2041": 6, "2042": 4, "2043": 5, "2044": 7, "2045": 8,
            "2046": 8, "2047": 7, "2048": 6, "2049": 7, "2050": 5,
            "2060": 4, "2061": 5, "2062": 6, "2063": 7, "2064": 8,
            "2065": 6, "2066": 8, "2067": 10, "2068": 9, "2069": 11,
            "2070": 12, "2071": 11, "2072": 13, "2073": 14, "2074": 15,
            "2075": 16, "2076": 17, "2077": 20, "2078": 22, "2079": 24,
            "2080": 25, "2081": 27, "2082": 30, "2083": 45, "2084": 28,
            "2085": 18, "2086": 17, "2087": 15, "2088": 7, "2089": 5,
            "2090": 6, "2091": 8, "2092": 14, "2093": 15, "2094": 16,
            "2095": 12, "2096": 13, "2097": 18, "2099": 19, "2100": 16,
            "2101": 22, "2102": 20, "2103": 23, "2104": 25, "2105": 18,
            "2106": 30, "2107": 35, "2108": 40, "2109": 15, "2110": 8,
            "2111": 9, "2112": 12, "2113": 13, "2114": 14, "2115": 16,
            "2116": 15, "2117": 17, "2118": 20, "2119": 16, "2120": 18,
            "2121": 15, "2122": 16, "2123": 18, "2124": 20, "2125": 22,
            "2126": 20, "2127": 14, "2128": 12, "2129": 15, "2130": 8,
            "2131": 9, "2132": 10, "2133": 9, "2134": 11, "2135": 12,
            "2136": 13, "2137": 10, "2138": 11, "2139": 13, "2140": 14,
            "2141": 15, "2142": 18, "2143": 16, "2144": 19, "2145": 22,
            "2146": 25, "2147": 30, "2148": 32, "2150": 23, "2151": 22,
            "2152": 24, "2153": 28, "2154": 30, "2155": 35, "2156": 32,
            "2157": 38, "2158": 30, "2159": 35, "2160": 20, "2161": 22,
            "2162": 24, "2163": 25, "2164": 30, "2165": 27, "2166": 25,
            "2167": 28, "2168": 32, "2169": 30, "2170": 32, "2171": 35,
            "2172": 38, "2173": 40, "2174": 42, "2175": 35, "2176": 28,
            "2177": 30, "2178": 40, "2179": 45, "2190": 12, "2191": 13,
            "2192": 11, "2193": 10, "2194": 12, "2195": 14, "2196": 15,
            "2197": 16, "2198": 18, "2199": 20, "2200": 18, "2201": 20,
            "2202": 17, "2203": 10, "2204": 8, "2205": 12, "2206": 10,
            "2207": 11, "2208": 14, "2209": 16, "2210": 18, "2211": 20,
            "2212": 22, "2213": 24, "2214": 26, "2216": 12, "2217": 14,
            "2218": 15, "2219": 16, "2220": 18, "2221": 20, "2222": 22,
            "2223": 24, "2224": 26, "2225": 28, "2226": 25, "2227": 27,
            "2228": 28, "2229": 29, "2230": 30, "2231": 32, "2232": 28,
            "2233": 30, "2234": 32, "2250": 80, "2251": 85, "2256": 90,
            "2257": 95, "2258": 88, "2259": 92, "2260": 82, "2261": 95,
            "2262": 100, "2263": 105, "2264": 120, "2265": 125, "2267": 130,
            "2278": 140, "2280": 110, "2281": 115, "2282": 112, "2283": 118,
            "2284": 120, "2285": 125, "2286": 128, "2287": 130, "2289": 125,
            "2290": 128, "2291": 130, "2292": 135, "2293": 138, "2294": 140,
            "2295": 145, "2296": 148, "2297": 150, "2298": 132, "2299": 135,
            "2300": 160, "2302": 162, "2303": 158, "2304": 165, "2305": 168,
            "2306": 170, "2307": 172, "2308": 160, "2309": 163, "2310": 165,
            "2311": 180, "2312": 300, "2314": 175, "2315": 190, "2316": 185,
            "2317": 195, "2318": 170, "2319": 175, "2320": 168, "2321": 172,
            "2322": 165, "2323": 170, "2324": 180, "2325": 140, "2326": 145,
            "2327": 148, "2328": 250, "2329": 280, "2330": 200, "2331": 220,
            "2333": 260, "2334": 180, "2335": 175, "2336": 280, "2337": 300,
            "2338": 320, "2339": 350, "2340": 400, "2341": 420, "2342": 440,
            "2343": 380, "2344": 400, "2345": 420, "2346": 450, "2347": 480,
            "2350": 500, "2352": 320, "2353": 340, "2354": 550, "2355": 580,
            "2356": 600, "2357": 500, "2358": 520, "2359": 540, "2360": 560,
            "2361": 580, "2365": 450, "2369": 500, "2370": 550, "2371": 520,
            "2372": 540, "2379": 400, "2380": 420, "2381": 440, "2382": 480,
            "2386": 550, "2387": 580, "2388": 520, "2390": 450, "2395": 380,
            "2396": 550, "2397": 500, "2398": 480, "2399": 460, "2400": 600,
            "2401": 580, "2402": 560, "2403": 540, "2404": 520, "2405": 650,
            "2406": 700, "2408": 650, "2409": 680, "2410": 620, "2411": 640,
            "2415": 250, "2420": 180, "2421": 175, "2422": 280, "2423": 250,
            "2424": 320, "2425": 280, "2426": 300, "2427": 320, "2428": 260,
            "2429": 300, "2430": 320, "2431": 450, "2439": 400, "2440": 480,
            "2441": 420, "2442": 400, "2443": 380, "2444": 390, "2445": 385,
            "2446": 400, "2447": 450, "2448": 480, "2449": 460, "2450": 530,
            "2452": 550, "2453": 500, "2454": 520, "2455": 540, "2456": 560,
            "2460": 620, "2462": 600, "2463": 580, "2464": 640, "2465": 660,
            "2466": 680, "2469": 750, "2470": 700, "2471": 720, "2472": 740,
            "2473": 760, "2474": 780, "2475": 800, "2476": 680, "2477": 720,
            "2478": 750, "2479": 780, "2480": 730, "2481": 770, "2482": 790,
            "2483": 810, "2484": 850, "2485": 830, "2486": 840, "2487": 860,
            "2488": 880, "2489": 870, "2490": 850, "2500": 80, "2502": 85,
            "2505": 82, "2506": 84, "2508": 60, "2515": 65, "2516": 68,
            "2517": 70, "2518": 75, "2519": 78, "2520": 82, "2525": 85,
            "2526": 75, "2527": 90, "2528": 95, "2529": 100, "2530": 85,
            "2533": 110, "2534": 115, "2535": 140, "2536": 250, "2537": 280,
            "2538": 180, "2539": 220, "2540": 180, "2541": 200, "2545": 350,
            "2546": 380, "2548": 420, "2549": 450, "2550": 480, "2555": 55,
            "2556": 50, "2557": 52, "2558": 48, "2559": 46, "2560": 55,
            "2563": 58, "2564": 35, "2565": 38, "2566": 42, "2567": 50,
            "2568": 85, "2569": 90, "2570": 60, "2571": 75, "2572": 95,
            "2573": 100, "2574": 110, "2575": 120, "2576": 130, "2577": 140,
            "2578": 145, "2579": 150, "2580": 200, "2581": 250, "2582": 280,
            "2583": 260, "2584": 300, "2585": 320, "2586": 380, "2587": 400,
            "2588": 350, "2590": 450, "2594": 380, "2618": 280, "2619": 290,
            "2620": 300, "2621": 290, "2622": 250, "2623": 200, "2624": 150,
            "2625": 180, "2626": 400, "2627": 450, "2628": 500, "2629": 480,
            "2630": 420, "2631": 450, "2632": 480, "2633": 550, "2640": 580,
            "2641": 560, "2642": 600, "2643": 550, "2644": 520, "2645": 620,
            "2646": 650, "2647": 600, "2648": 1100, "2649": 450, "2650": 460,
            "2651": 470, "2652": 500, "2653": 480, "2655": 520, "2656": 550,
            "2658": 580, "2659": 600, "2660": 550, "2661": 570, "2663": 540,
            "2665": 620, "2666": 450, "2668": 500, "2669": 600, "2670": 550,
            "2671": 580, "2672": 700, "2675": 750, "2678": 400, "2680": 580,
            "2681": 600, "2700": 560, "2701": 520, "2702": 540, "2703": 580,
            "2705": 600, "2706": 580, "2707": 620, "2708": 650, "2710": 700,
            "2711": 750, "2712": 720, "2713": 700, "2714": 680, "2715": 900,
            "2716": 650, "2717": 680, "2720": 400, "2721": 500, "2722": 450,
            "2725": 350, "2726": 380, "2727": 400, "2729": 420, "2730": 550,
            "2731": 750, "2732": 700, "2733": 680, "2734": 800, "2735": 720,
            "2736": 700, "2737": 780, "2738": 800, "2739": 820, "2745": 55,
            "2747": 50, "2748": 52, "2749": 54, "2750": 55, "2752": 65,
            "2753": 60, "2754": 55, "2756": 58, "2757": 62, "2758": 50,
            "2759": 48, "2760": 45, "2761": 42, "2762": 40, "2763": 38,
            "2765": 45, "2766": 35, "2767": 32, "2768": 38, "2769": 42,
            "2770": 40, "2773": 55, "2774": 60, "2775": 80, "2776": 65,
            "2777": 70, "2778": 75, "2779": 80, "2780": 85, "2782": 90,
            "2783": 95, "2784": 100, "2785": 110, "2786": 120, "2787": 200,
            "2790": 150, "2791": 450, "2792": 350, "2793": 380, "2794": 320,
            "2795": 200, "2797": 250, "2798": 230, "2799": 280, "2800": 260,
            "2803": 400, "2804": 320, "2805": 380, "2806": 400, "2807": 420,
            "2808": 300, "2809": 450, "2810": 350, "2818": 280, "2820": 350,
            "2821": 500, "2823": 550, "2824": 600, "2825": 650, "2826": 450,
            "2827": 400, "2828": 550, "2829": 600, "2830": 400, "2831": 700,
            "2832": 750, "2833": 800, "2834": 850, "2835": 750, "2836": 900,
            "2838": 650, "2839": 600, "2840": 800, "2842": 350, "2843": 320,
            "2844": 300, "2845": 280, "2846": 180, "2847": 200, "2848": 170,
            "2849": 250, "2850": 270, "2852": 300, "2864": 320, "2865": 350,
            "2866": 380, "2867": 400, "2868": 450, "2869": 500, "2870": 380,
            "2871": 420, "2873": 550, "2874": 600, "2875": 480, "2876": 450,
            "2877": 550, "2878": 750, "2879": 800, "2880": 1100, "2898": 1600,
            "2899": 1650
        };
        
        const postcodeDirections = {
            "2000": "", "2001": "", "2002": "", "2003": "", "2004": "",
            "2006": "S", "2007": "S", "2008": "S", "2009": "SW", "2010": "SE",
            "2011": "E", "2012": "S", "2013": "S", "2014": "S", "2015": "S",
            "2016": "SW", "2017": "S", "2018": "S", "2019": "S", "2020": "SE",
            "2021": "E", "2022": "E", "2023": "E", "2024": "E", "2025": "E",
            "2026": "E", "2027": "E", "2028": "E", "2029": "E", "2030": "E",
            "2031": "SE", "2032": "SE", "2033": "SE", "2034": "SE", "2035": "SE",
            "2036": "SE", "2037": "W", "2038": "W", "2039": "W", "2040": "W",
            "2041": "W", "2042": "SW", "2043": "SW", "2044": "S", "2045": "W",
            "2046": "W", "2047": "W", "2048": "W", "2049": "W", "2050": "SW",
            "2060": "N", "2061": "N", "2062": "N", "2063": "N", "2064": "N",
            "2065": "N", "2066": "N", "2067": "N", "2068": "N", "2069": "N",
            "2070": "N", "2071": "N", "2072": "N", "2073": "N", "2074": "N",
            "2075": "N", "2076": "N", "2077": "N", "2078": "N", "2079": "N",
            "2080": "N", "2081": "N", "2082": "N", "2083": "N", "2084": "N",
            "2085": "NE", "2086": "NE", "2087": "NE", "2088": "N", "2089": "N",
            "2090": "N", "2091": "NE", "2092": "NE", "2093": "NE", "2094": "NE",
            "2095": "NE", "2096": "NE", "2097": "NE", "2099": "NE", "2100": "N",
            "2101": "N", "2102": "N", "2103": "N", "2104": "N", "2105": "N",
            "2106": "N", "2107": "N", "2108": "N", "2109": "NW", "2110": "N",
            "2111": "NW", "2112": "NW", "2113": "NW", "2114": "NW", "2115": "NW",
            "2116": "NW", "2117": "NW", "2118": "NW", "2119": "NW", "2120": "NW",
            "2121": "NW", "2122": "NW", "2123": "NW", "2124": "NW", "2125": "NW",
            "2126": "NW", "2127": "W", "2128": "W", "2129": "W", "2130": "W",
            "2131": "W", "2132": "W", "2133": "SW", "2134": "W", "2135": "W",
            "2136": "W", "2137": "W", "2138": "W", "2139": "W", "2140": "W",
            "2141": "W", "2142": "W", "2143": "W", "2144": "W", "2145": "W",
            "2146": "W", "2147": "W", "2148": "W", "2150": "W", "2151": "NW",
            "2152": "W", "2153": "NW", "2154": "NW", "2155": "NW", "2156": "NW",
            "2157": "NW", "2158": "NW", "2159": "NW", "2160": "W", "2161": "W",
            "2162": "W", "2163": "W", "2164": "W", "2165": "SW", "2166": "SW",
            "2167": "SW", "2168": "SW", "2169": "SW", "2170": "SW", "2171": "SW",
            "2172": "SW", "2173": "S", "2174": "SW", "2175": "SW", "2176": "W",
            "2177": "SW", "2178": "W", "2179": "SW", "2190": "SW", "2191": "SW",
            "2192": "SW", "2193": "SW", "2194": "SW", "2195": "SW", "2196": "SW",
            "2197": "SW", "2198": "SW", "2199": "SW", "2200": "SW", "2201": "SW",
            "2202": "SW", "2203": "SW", "2204": "SW", "2205": "S", "2206": "SW",
            "2207": "S", "2208": "S", "2209": "S", "2210": "S", "2211": "SW",
            "2212": "SW", "2213": "SW", "2214": "SW", "2216": "S", "2217": "S",
            "2218": "S", "2219": "S", "2220": "S", "2221": "S", "2222": "S",
            "2223": "S", "2224": "S", "2225": "S", "2226": "S", "2227": "S",
            "2228": "S", "2229": "S", "2230": "S", "2231": "S", "2232": "S",
            "2233": "S", "2234": "SW", "2250": "N", "2251": "N", "2256": "N",
            "2257": "N", "2258": "N", "2259": "N", "2260": "N", "2261": "N",
            "2262": "N", "2263": "N", "2264": "N", "2265": "N", "2267": "N",
            "2278": "N", "2280": "N", "2281": "N", "2282": "N", "2283": "N",
            "2284": "N", "2285": "N", "2286": "N", "2287": "N", "2289": "N",
            "2290": "N", "2291": "N", "2292": "N", "2293": "N", "2294": "N",
            "2295": "N", "2296": "N", "2297": "N", "2298": "N", "2299": "N",
            "2300": "N", "2302": "N", "2303": "N", "2304": "N", "2305": "N",
            "2306": "N", "2307": "N", "2308": "N", "2309": "N", "2310": "N",
            "2311": "N", "2312": "N", "2314": "N", "2315": "N", "2316": "N",
            "2317": "N", "2318": "N", "2319": "N", "2320": "N", "2321": "N",
            "2322": "N", "2323": "N", "2324": "N", "2325": "NW", "2326": "NW",
            "2327": "NW", "2328": "NW", "2329": "NW", "2330": "NW", "2331": "NW",
            "2333": "NW", "2334": "NW", "2335": "NW", "2336": "N", "2337": "N",
            "2338": "N", "2339": "N", "2340": "N", "2341": "N", "2342": "N",
            "2343": "NW", "2344": "N", "2345": "N", "2346": "N", "2347": "N",
            "2350": "N", "2352": "N", "2353": "N", "2354": "N", "2355": "NW",
            "2356": "NW", "2357": "NW", "2358": "N", "2359": "N", "2360": "N",
            "2361": "N", "2365": "N", "2369": "N", "2370": "N", "2371": "N",
            "2372": "N", "2379": "NW", "2380": "NW", "2381": "NW", "2382": "NW",
            "2386": "NW", "2387": "NW", "2388": "NW", "2390": "N", "2395": "NW",
            "2396": "NW", "2397": "NW", "2398": "NW", "2399": "NW", "2400": "N",
            "2401": "NW", "2402": "N", "2403": "NW", "2404": "NW", "2405": "NW",
            "2406": "NW", "2408": "NW", "2409": "NW", "2410": "N", "2411": "N",
            "2415": "N", "2420": "N", "2421": "N", "2422": "N", "2423": "N",
            "2424": "N", "2425": "N", "2426": "N", "2427": "N", "2428": "N",
            "2429": "N", "2430": "N", "2431": "N", "2439": "N", "2440": "N",
            "2441": "N", "2442": "N", "2443": "N", "2444": "N", "2445": "N",
            "2446": "N", "2447": "N", "2448": "N", "2449": "N", "2450": "N",
            "2452": "N", "2453": "N", "2454": "N", "2455": "N", "2456": "N",
            "2460": "N", "2462": "N", "2463": "N", "2464": "N", "2465": "N",
            "2466": "N", "2469": "N", "2470": "N", "2471": "N", "2472": "N",
            "2473": "N", "2474": "N", "2475": "N", "2476": "N", "2477": "N",
            "2478": "N", "2479": "N", "2480": "N", "2481": "N", "2482": "N",
            "2483": "N", "2484": "N", "2485": "N", "2486": "N", "2487": "N",
            "2488": "N", "2489": "N", "2490": "N", "2500": "S", "2502": "S",
            "2505": "S", "2506": "S", "2508": "S", "2515": "S", "2516": "S",
            "2517": "S", "2518": "S", "2519": "S", "2520": "S", "2525": "S",
            "2526": "SW", "2527": "S", "2528": "S", "2529": "S", "2530": "SW",
            "2533": "S", "2534": "S", "2535": "S", "2536": "S", "2537": "S",
            "2538": "S", "2539": "S", "2540": "S", "2541": "S", "2545": "S",
            "2546": "S", "2548": "S", "2549": "S", "2550": "S", "2555": "SW",
            "2556": "SW", "2557": "SW", "2558": "SW", "2559": "SW", "2560": "SW",
            "2563": "SW", "2564": "SW", "2565": "SW", "2566": "SW", "2567": "SW",
            "2568": "SW", "2569": "SW", "2570": "SW", "2571": "SW", "2572": "SW",
            "2573": "SW", "2574": "SW", "2575": "SW", "2576": "S", "2577": "S",
            "2578": "SW", "2579": "SW", "2580": "SW", "2581": "SW", "2582": "SW",
            "2583": "SW", "2584": "SW", "2585": "SW", "2586": "SW", "2587": "SW",
            "2588": "SW", "2590": "SW", "2594": "SW", "2618": "SW", "2619": "SW",
            "2620": "SW", "2621": "SW", "2622": "S", "2623": "SW", "2624": "SW",
            "2625": "SW", "2626": "SW", "2627": "SW", "2628": "SW", "2629": "SW",
            "2630": "SW", "2631": "SW", "2632": "SW", "2633": "SW", "2640": "SW",
            "2641": "SW", "2642": "SW", "2643": "SW", "2644": "SW", "2645": "SW",
            "2646": "SW", "2647": "SW", "2648": "W", "2649": "SW", "2650": "SW",
            "2651": "SW", "2652": "SW", "2653": "SW", "2655": "SW", "2656": "SW",
            "2658": "SW", "2659": "SW", "2660": "SW", "2661": "SW", "2663": "SW",
            "2665": "SW", "2666": "SW", "2668": "SW", "2669": "W", "2670": "SW",
            "2671": "W", "2672": "W", "2675": "W", "2678": "SW", "2680": "W",
            "2681": "W", "2700": "SW", "2701": "SW", "2702": "SW", "2703": "SW",
            "2705": "SW", "2706": "SW", "2707": "SW", "2708": "SW", "2710": "SW",
            "2711": "SW", "2712": "SW", "2713": "SW", "2714": "SW", "2715": "W",
            "2716": "SW", "2717": "SW", "2720": "SW", "2721": "SW", "2722": "SW",
            "2725": "SW", "2726": "SW", "2727": "SW", "2729": "SW", "2730": "SW",
            "2731": "SW", "2732": "SW", "2733": "SW", "2734": "SW", "2735": "SW",
            "2736": "SW", "2737": "SW", "2738": "SW", "2739": "SW", "2745": "W",
            "2747": "W", "2748": "W", "2749": "W", "2750": "W", "2752": "W",
            "2753": "NW", "2754": "NW", "2756": "NW", "2757": "NW", "2758": "W",
            "2759": "W", "2760": "W", "2761": "W", "2762": "NW", "2763": "NW",
            "2765": "NW", "2766": "W", "2767": "W", "2768": "NW", "2769": "NW",
            "2770": "W", "2773": "W", "2774": "W", "2775": "NW", "2776": "W",
            "2777": "W", "2778": "W", "2779": "W", "2780": "W", "2782": "W",
            "2783": "W", "2784": "W", "2785": "W", "2786": "W", "2787": "SW",
            "2790": "W", "2791": "W", "2792": "W", "2793": "W", "2794": "W",
            "2795": "W", "2797": "W", "2798": "W", "2799": "W", "2800": "W",
            "2803": "W", "2804": "W", "2805": "W", "2806": "W", "2807": "W",
            "2808": "W", "2809": "W", "2810": "W", "2818": "NW", "2820": "NW",
            "2821": "NW", "2823": "NW", "2824": "NW", "2825": "NW", "2826": "W",
            "2827": "NW", "2828": "NW", "2829": "NW", "2830": "NW", "2831": "NW",
            "2832": "NW", "2833": "NW", "2834": "NW", "2835": "W", "2836": "NW",
            "2838": "NW", "2839": "NW", "2840": "NW", "2842": "NW", "2843": "NW",
            "2844": "NW", "2845": "NW", "2846": "NW", "2847": "NW", "2848": "NW",
            "2849": "NW", "2850": "NW", "2852": "NW", "2864": "W", "2865": "W",
            "2866": "W", "2867": "W", "2868": "W", "2869": "W", "2870": "W",
            "2871": "W", "2873": "W", "2874": "W", "2875": "W", "2876": "W",
            "2877": "W", "2878": "W", "2879": "W", "2880": "W", "2898": "SE",
            "2899": "SE"
        };
        
        function formatDate(dateStr) {
            if (!dateStr || dateStr.length !== 8) return dateStr;
            return `${dateStr.substring(0, 4)}/${dateStr.substring(4, 6)}/${dateStr.substring(6, 8)}`;
        }
        
        function extractPostcode(address) {
            const match = address.match(/\b(2\d{3})\b/);
            return match ? match[1] : null;
        }
        
        function getDistanceFromSydney(postcode) {
            if (!postcode) return null;
            return postcodeDistances[postcode] || null;
        }
        
        function getDirectionFromSydney(postcode) {
            if (!postcode) return null;
            return postcodeDirections[postcode] || null;
        }

        async function loadData() {
            try {
                const fileNumber = Math.floor(Math.random() * 10) + 1;
                const response = await fetch(`https://raw.githubusercontent.com/petedrennan/property-guesser/main/output_filtered_${fileNumber}.csv`);
                
                if (!response.ok) {
                    throw new Error(`Failed to load CSV file ${fileNumber} from GitHub`);
                }
                
                const text = await response.text();
                const lines = text.split('\n');
                const headers = lines[0].split(',');
                
                allProperties = lines.slice(1)
                    .filter(line => line.trim())
                    .map(line => {
                        const values = line.split(',');
                        return {
                            address: values[0],
                            settlement_date: values[1],
                            price: parseFloat(values[2]),
                            area: parseFloat(values[3])
                        };
                    })
                    .filter(p => p.price && p.area && !isNaN(p.price) && !isNaN(p.area));
                
                if (allProperties.length === 0) {
                    throw new Error('No valid properties found in data');
                }
                
                loadNewProperty();
            } catch (error) {
                document.getElementById('app').innerHTML = `
                    <div class="error">
                        <strong>Error loading data:</strong> ${error.message}<br>
                        <small>Make sure your CSV files are hosted on GitHub at: https://github.com/petedrennan/property-guesser/blob/main/output_filtered_1.csv through output_filtered_10.csv</small>
                    </div>
                `;
            }
        }
        
        
        function loadNewProperty() {
            currentProperty = allProperties[Math.floor(Math.random() * allProperties.length)];
            renderProperty();
        }
        

        async function renderProperty() {
            const addressParts = currentProperty.address.split(',');
            const streetAddress = addressParts[0].trim();
            const suburbPostcode = addressParts.length > 1 ? addressParts.slice(1).join(',').trim() : '';
            
            const postcode = extractPostcode(currentProperty.address);
            const distanceFromSydney = getDistanceFromSydney(postcode);
            const directionFromSydney = getDirectionFromSydney(postcode);
            
            let locationDisplay = 'Unknown';
            if (distanceFromSydney !== null && directionFromSydney) {
                locationDisplay = `~${distanceFromSydney} km ${directionFromSydney}`;
            } else if (distanceFromSydney !== null) {
                locationDisplay = `~${distanceFromSydney} km`;
            }
            
            const searchQuery = encodeURIComponent(`"${streetAddress}" ${suburbPostcode}`);
            const bingImageUrl1 = `https://www.bing.com/images/search?q=${searchQuery}&qft=+filterui:photo-photo&FORM=IRFLTR`;
            
            document.getElementById('app').innerHTML = `
                <div class="content">
                    <div class="property-details">
                        <div class="detail-row">
                            <span class="detail-label">Address</span>
                            <span class="detail-value">${currentProperty.address}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Settlement Date</span>
                            <span class="detail-value">${formatDate(currentProperty.settlement_date)}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Land Size</span>
                            <span class="detail-value">${currentProperty.area.toLocaleString()}m¬≤</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Distance from Sydney CBD</span>
                            <span class="detail-value">${locationDisplay}</span>
                        </div>
        
                    </div>
                    
                    <div class="guess-section">
                        <label for="guessInput">What do you think it sold for?</label>
                        <div class="input-group">
                            <input 
                                type="text" 
                                id="guessInput" 
                                class="price-input" 
                                placeholder="Enter price (e.g., 850000)"
                                onkeypress="if(event.key === 'Enter') submitGuess()"
                            >
                            <button class="btn btn-primary" onclick="submitGuess()">Guess</button>
                        </div>
                    </div>
                    
                    <div id="result" class="result"></div>
                    
                    <div id="nextButton" style="display: none; text-align: center; margin-top: 20px;">
                        <button class="btn btn-secondary" onclick="loadNewProperty()">Next Property ‚Üí</button>
                    </div>
                </div>
                
                <div class="property-media-container">
                    <div class="media-grid">
                        <div class="main-image">
                            <iframe 
                                src="${bingImageUrl1}"
                                style="width: 100%; height: 100%; border: 0;"
                                loading="lazy"
                                sandbox="allow-scripts allow-same-origin">
                            </iframe>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('guessInput').focus();
        }
        
        
        function submitGuess() {
            const input = document.getElementById('guessInput');
            const guess = parseFloat(input.value.replace(/[^0-9.]/g, ''));
            
            if (!guess || guess <= 0) {
                alert('Please enter a valid price');
                return;
            }
            
            const actualPrice = currentProperty.price;
            const difference = guess - actualPrice;
            const percentDiff = (difference / actualPrice) * 100;
            const absDiff = Math.abs(difference);
            const absPercentDiff = Math.abs(percentDiff);
            
            sessionStats.rounds++;
            sessionStats.errors.push(absPercentDiff);
            sessionStats.guesses.push(difference);
            updateStats();
            
            let resultClass = 'result-far';
            let resultEmoji = 'üò¨';
            if (absPercentDiff < 5) {
                resultClass = 'result-success';
                resultEmoji = 'üéØ';
            } else if (absPercentDiff < 15) {
                resultClass = 'result-close';
                resultEmoji = 'üëç';
            }
            
            const resultDiv = document.getElementById('result');
            resultDiv.className = `result ${resultClass} show`;
            resultDiv.innerHTML = `
                <div class="result-title">${resultEmoji} ${absPercentDiff < 5 ? 'Excellent!' : absPercentDiff < 15 ? 'Pretty Close!' : 'Not quite!'}</div>
                <div class="result-details">
                    <div class="result-item">
                        <div class="result-item-label">Your Guess</div>
                        <div class="result-item-value">$${guess.toLocaleString()}</div>
                    </div>
                    <div class="result-item">
                        <div class="result-item-label">Actual Price</div>
                        <div class="result-item-value">$${actualPrice.toLocaleString()}</div>
                    </div>
                    <div class="result-item">
                        <div class="result-item-label">Difference</div>
                        <div class="result-item-value" style="color: ${difference > 0 ? '#e74c3c' : '#27ae60'}">
                            ${difference > 0 ? '+' : ''}$${difference.toLocaleString()}
                        </div>
                    </div>
                    <div class="result-item">
                        <div class="result-item-label">Percentage Off</div>
                        <div class="result-item-value">
                            ${percentDiff > 0 ? '+' : ''}${percentDiff.toFixed(1)}%
                        </div>
                    </div>
                </div>
            `;
            
            input.disabled = true;
            document.getElementById('nextButton').style.display = 'block';
        }
        
        function updateStats() {
            document.getElementById('roundCount').textContent = sessionStats.rounds;
            
            if (sessionStats.errors.length > 0) {
                const avgError = sessionStats.errors.reduce((a, b) => a + b, 0) / sessionStats.errors.length;
                document.getElementById('avgError').textContent = avgError.toFixed(1) + '%';
                
                const avgBias = sessionStats.guesses.reduce((a, b) => a + b, 0) / sessionStats.guesses.length;
                const biasText = avgBias > 0 ? 'Over' : 'Under';
                document.getElementById('bias').textContent = biasText;
            }
        }
        
        loadData();
    </script>
        
</body>
</html>